\section*{Synthesizing Measures of State Preference}

The approach that we introduce here to measure state preferences starts by assuming that both UN voting and alliance relationships are sources of information on how states relate to one another on the international stage. By accounting for the multiple layers upon which states interact with one another we can synthesize a better measure of state preferences than if we relied on any one measure alone.\footnote{The idea of using multiple metrics to get a better handle on preferences is not new, in fact, Signorino and Ritter suggested it in introducing S-scores, which were designed to allow for aggregation of similarity on multiple dimensions (such as alliances and UN voting).} The downside of this extant approach, however, is that it does not account for structural patterns that we often see in relational data. 

Relational data is composed of observations between pairs of actors, or dyads. For both alliance relationships and UN voting, we are able to observe how the actors in the international system interact with one another across time. This system of interactions taken in its totality defines a network, and within these types of structures a bevy of research has shown that we need methods that go beyond assuming that interactions are taking place between just two actors in a vacuum \citep{wasserman:faust:1994,snijders:nowicki:1997}. As such we reformulate the problem of determining state preferences in terms of a network analysis. The goal of our approach is summarized in Figure~\ref{fig:tensViz}. In the top row, we represent UN voting and alliance patterns at time $t$ as a pair of adjacency matrices that form a multiplex.\footnote{The approach that we describe here can be generalized to a multiplex with more than two dimensions.} This multiplex represents the relations between states across two dimensions, and our goal is to extract a lower dimensional representation that accounts for the types of interdependencies that occur in networks. The end result then will be a single $n \times n$ matrix, where $n$ represents the number of actors, in which the cross-sections denote our estimates of the similarity of preferences between two countries.

% needs to be modified
% prolly dont need this simplistic representation for a networks audience
\begin{figure}[ht]
	\centering
	\resizebox{.8\textwidth}{!}{\input{dimRedStrat.tex}}
	\caption{The green and blue colors represent different relational measures and darker shading indicates later time periods. Our goal is to reduce the patterns found across those layers of relationships into a single measure.}
	\label{fig:tensViz}
\end{figure}

We generate these estimates through a latent variable framework that relies on a matrix decomposition to estimate a Gaussian score for each country pair. We will show that by combining different measures of state preferences, and better accounting for network dependencies through our approach, we are able to generate a measure for preference that maintains the insights of both UN voting scores and S-scores and which can yield new insights, in particular when it comes to predicting and explaining interstate conflict.

\subsection*{Latent Factor Model}

In essence, our goal here is to measure an unobservable concept. This is a problem that is very familiar in political science and a number of techniques based on latent variable models have been developed to study political ideology \citep{martin:quinn:2002,konig:etal:2013}, human rights abuses \citep{fariss:2014}, and judicial independence \citep{linzer:staton:2015}. Obviously, the ideal points measure developed by \citet{bailey:etal:2015} also follows in this growing practice of extracting unobserved information via latent variable modeling. Here we employ this general framework to develop a latent measurement of how a state relates to other states in a network context. The factor analysis we employ seeks to take as an input the interactions that actors have with others across a variety of dimensions and project this onto a low-dimensional space. In many ways this goal is no different than how others have sought to find simpler representations of legislators and bills \citep{poole:rosenthal:1985,clinton:etal:2004}.

However, in the network case there are specific types of patterns that often occur and that should be captured when reducing the dimensionality of a network. One such pattern is stochastic equivalence. Stochastic equivalence refers to the idea that there are communities of nodes in a network, and actors within a community act similarly towards those in other communities. Thus the community membership of an actor provides us with information on how that actor will act towards others in the network. Put more concretely, a pair of actors $ij$ are stochastically equivalent if the probability of $i$ relating to, and being related to, by every other actor is the same as the probability for $j$ \citep{anderson:etal:1992}. This concept simply speaks to the assertion that we can learn something about how an actor will interact with an entire network based on, for example, the existing set of alliances that they are enmeshed in.

An additional dependence pattern that often manifests in networks is homophily -- the tendency of actors to form links they share some latent attribute. In many cases, homophily will lead to greater levels of transitivity in a network because, if $i$ and $j$ share an attribute and thus are more likely to be linked, and $j$ and $k$ share the same attribute and are linked, then we should expect to see a link between $i$ and $k$. In the context of clustering in alliance relationships, we are likely to find that states like the United States, United Kingdom, and Germany may cluster together because they share some latent state level attribute. We would ignore salient information if we did not use, for example, the United Kingdom's behavior towards third parties, when trying to understand the United States' preference similarity with those parties. Doing so is likely to paint an incomplete picture of the preferences that states share with one another.

We account for higher order dependence patterns using a latent factor model (LFM) that allows us to capture both concepts discussed above: the tendency of actors to assort themselves into groups and to form transitive links \citep{hoff:2005,hoff:etal:2013,minhas:etal:2018}. Using the LFM ensures that similarity in preferences are likely to be transitive, for example, if the United States has similar preferences to the United Kingdom, and the United Kingdom to France, the United States' preferences should be relatively close to France's. Further the most useful feature of the LFM for our purpose is that it places actors it summarizes the interdependencies between actors in a relational k-dimensional latent vector space. Thus, the model we use does a better job of capturing the interdependencies in both alliance and voting data than we would expect from the literature. From this space we can not only approximate how pairs of countries relate to one another, but also estimate how an actor may relate to a cluster of other actors or the international system as a whole. Actors that have vectors pointing in similar directions are more likely to have similar state preferences based on their alliances and UN voting records. The angle between the vectors for actors $i$ and $j$ provides an estimate of how similar the state preferences of $i$ are to $j$. 

To generate this measure, scholars would begin by constructing $T$ different $n \times n \times p$ arrays, where $T$ represents the number of periods, $n$ represents the number of actors,\footnote{The number of actors can vary by period.} and $p$ the number of observed variables used to synthesize a measure of state preference. For the application that we focus on in the next section, both alliance relationships and UN voting scores are undirected measures, meaning that $y_{ij} = y_{ji} \; \forall \; p \text{ and } t$.\footnote{The approach we describe can also be generalized to the case where $y_{ij} \neq y_{ji}$.} In order to obtain a lower-dimension relational measure of state preferences, we use the LFM separately for each time point: 

\begin{align*}
	Y &= f(\theta)\\
	\theta &= \beta^{\top} X + Z \\
	Z &= M + E  \\
	M &= U \Lambda U^{\top}\text{, where } \\
	&\qquad u_{i} \in \rm I\!R^{k} \text{ and } \\ 
	&\qquad \Lambda \text{ is a } k \times k \text{ diagonal matrix}
\end{align*}

\noindent where $f(.)$ is a general link function corresponding to the distribution of $Y$ and $\beta^{\top}\mathbf{X}$ is the standard regression term for dyadic and nodal fixed effects. In this application, for the sake of parsimony we abstain from using fixed effects. However, if one was interested in estimating a measure of preference that parsed out the effect of geographic distance between $i$ and $j$, for example, than this could be accomplished within the context of this framework by simply including that as a covariate in the $X$ design array. $Z$ represents any additional patterns in data unrelated to the specified dyadic and nodal fixed effects. To incorporate multiple measures of similarity into a single ideal point estimation, we treat each different slice of data as arising from a common distribution. In this way, each additional observed relationship between actors that we add serves to provide additional information to the model that can be used to estimate a latent measure of state preference. 

The key part of this model lies in the decomposition of $Z$. Specifically, we can write $Z = M + E$ such that the matrix $E$ represents noise, and $M$ is systematic effects. By matrix theory, we can factorize $M$ into the product of two simpler matrices: $M = U \Lambda U^{\top}$, where $u_{i} \in \rm I\!R^{k}$ is a latent vector associated to node $i$ and $\Lambda$ is a $k \times k$ diagonal matrix. Thus under this framework a vector of latent characteristics are estimated for each actor, $u_{i} = \{u_{i,1}, \ldots, u_{i,k}\}$. Similarity in the latent factors between two actors, $u_{i} \approx u_{j}$, corresponds to how stochastically equivalent they are and the diagonal entries in $\Lambda$, $\lambda_{k} > 0 \text{ or } \lambda_{k} < 0$, determine the level of homophily (or antihomophily) in the network \citep{minhas:etal:2018}. Within this framework, the LFM can represent either positive or negative homophily in varying degrees and stochastially equivalent actors may or may not share strong relationships with others in their ``community''.\footnote{This model does assume, once we condition on the latent factor $U \Lambda U^{\top}$, that relations are independent, but this factor has been found to capture the different dependencies that have been theorized to be present in both alliance and voting behavior.}

Inference of the latent vectors for each actor takes place within the context of a MCMC procedure that enables us to construct approximate samples from the posterior distributions of the latent variables. For the latent factor model, a diffuse normal prior is placed on $\Lambda$ and the prior distribution on $U$ is taken to be a uniform distribution. The MCMC proceeds by sampling the parameters from their full conditional distributions for each $k$: sample $\{u_{i}, \ldots, u_{n}\}$ from a multivariate normal distribution and then sample $\Lambda$ from its multivariate normal distribution.

The key output from the LFM for our purpose here is $U \Lambda U^{\top}$. Actor positions in the latent factor space are characterized by the concepts of homophily and stochastic equivalence  discussed above. Interpretation of this space needs to be done with care. Distances between actors cannot be interpreted using Euclidean metrics, as actor's latent positions are actually embedded within a k-dimensional hypersphere. This means that an actor's vector direction within the k-dimensional hypersphere indicates which latent preferences an actor $i$ has and does not have. Comparing the similarity of preferences between two states, $\{i,j\}$, can be accomplished by comparing the direction to which their respective factor vectors point. A commonly used metric for this sort of problem in the recommender system literature from computer science is the cosine of the angle formed by the latent vectors of both actors.\footnote{For a review of this literature see \citep{amatriain:etal:2015}.} We refer to this distance metric as latent angle distance.\footnote{This measure is defined as: $\text{Latent angle distance}_{ij} = \frac{u_{i} \cdot u_{j}}{||u_{i}|| \cdot ||u_{j}||}$.} Thus, if the estimated latent vectors of two states are in the same direction, they are apt to have both alliances and UN co-voting to similar partners. The way we measure this similarity in dimension is by looking at the absolute distance of the angles created by each states position and the center of the latent space. 
